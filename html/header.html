<!-- header_content -->
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="javascript:location.href=window.location.pathname">
      <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNDA4Ij48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImJzLWxvZ28tYSIgeDE9Ijc2LjA3OSIgeDI9IjUyMy40OCIgeTE9IjEwLjc5OCIgeTI9IjM2NS45NDUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjOTAxM2ZlIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNjYxMGYyIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImJzLWxvZ28tYiIgeDE9IjE5My41MDgiIHgyPSIyOTMuNTE0IiB5MT0iMTA5Ljc0IiB5Mj0iMjc4Ljg3MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmMWU1ZmMiLz48L2xpbmVhckdyYWRpZW50PjxmaWx0ZXIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBpZD0iYnMtbG9nby1jIiB3aWR0aD0iMTk3IiBoZWlnaHQ9IjI0OSIgeD0iMTYxLjkwMSIgeT0iODMuNDU3IiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz48ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiLz48ZmVPZmZzZXQgZHk9IjQiLz48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI4Ii8+PGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjE1IDAiLz48ZmVCbGVuZCBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3ciLz48ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3ciIHJlc3VsdD0ic2hhcGUiLz48L2ZpbHRlcj48L2RlZnM+PHBhdGggZmlsbD0idXJsKCNicy1sb2dvLWEpIiBkPSJNNTYuNDgxIDUzLjMyQzU1LjUxNSAyNS41OCA3Ny4xMjggMCAxMDYuMzQyIDBoMjk5LjM1M2MyOS4yMTQgMCA1MC44MjcgMjUuNTggNDkuODYxIDUzLjMyLS45MjggMjYuNjQ3LjI3NyA2MS4xNjUgOC45NjQgODkuMzEgOC43MTUgMjguMjMyIDIzLjQxMSA0Ni4wNzcgNDcuNDggNDguMzd2MjZjLTI0LjA2OSAyLjI5My0zOC43NjUgMjAuMTM4LTQ3LjQ4IDQ4LjM3LTguNjg3IDI4LjE0NS05Ljg5MiA2Mi42NjMtOC45NjQgODkuMzExLjk2NiAyNy43MzktMjAuNjQ3IDUzLjMxOS00OS44NjEgNTMuMzE5SDEwNi4zNDJjLTI5LjIxNCAwLTUwLjgyNy0yNS41OC00OS44Ni01My4zMTkuOTI3LTI2LjY0OC0uMjc4LTYxLjE2Ni04Ljk2Ni04OS4zMTFDMzguODAyIDIzNy4xMzggMjQuMDcgMjE5LjI5MyAwIDIxN3YtMjZjMjQuMDY5LTIuMjkzIDM4LjgwMi0yMC4xMzggNDcuNTE2LTQ4LjM3IDguNjg4LTI4LjE0NSA5Ljg5My02Mi42NjMgOC45NjUtODkuMzF6Ii8+PHBhdGggZmlsbD0idXJsKCNicy1sb2dvLWIpIiBmaWx0ZXI9InVybCgjYnMtbG9nby1jKSIgc3Ryb2tlPSIjZmZmIiBkPSJNMjY3LjEwMyAzMTIuNDU3YzQ3LjI5NyAwIDc1Ljc5OC0yMy4xNTggNzUuNzk4LTYxLjM1NSAwLTI4Ljg3My0yMC4zMzYtNDkuNzc2LTUwLjUzMi01My4wODV2LTEuMjAzYzIyLjE4NS0zLjYwOSAzOS41OTQtMjQuMjExIDM5LjU5NC00Ny4yMTkgMC0zMi43ODMtMjUuODgyLTU0LjEzOC02NS4zMjItNTQuMTM4aC04OC43NHYyMTdoODkuMjAyem0tNTQuNjkyLTE4OS40OGg0NS45MTFjMjQuOTU4IDAgMzkuMTMxIDExLjEyOCAzOS4xMzEgMzEuMjc5IDAgMjEuNTA1LTE2LjQ4NCAzMy41MzUtNDYuMzcyIDMzLjUzNWgtMzguNjd2LTY0LjgxNHptMCAxNjEuOTYxdi03MS40MzFoNDUuNjAyYzMyLjY2MSAwIDQ5LjYwOCAxMi4wMyA0OS42MDggMzUuNDkgMCAyMy40NTktMTYuNDg0IDM1Ljk0MS00Ny42MDUgMzUuOTQxaC00Ny42MDV6Ii8+PC9zdmc+Cg==" alt="Logo" width="60" height="48">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar_scroll" aria-controls="navbar_scroll" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar_scroll">
      <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll">
        <li class="nav-item">
          <a class="nav-link active" id="menu_link_home" aria-current="page" href="javascript:app.gotoHome()">Home</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="dropdown_account" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <span class="fa fa-user"></span>&nbsp;<span id="dropdown_text_account">Account</span>&nbsp;<b id="dropdown_text_account_username">User</b>
          </a>
          <ul class="dropdown-menu" id="dropdown_menu_account">
            <li><a class="dropdown-item" id="dropdown_menu_account_link_login" href="javascript:app.gotoLogin()">Login</a></li>
            <li><a class="dropdown-item" id="dropdown_menu_account_link_register" href="javascript:app.gotoRegister()">Register</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" id="dropdown_menu_account_link_account" href="javascript:app.gotoAccount()">Account</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" id="dropdown_menu_account_link_logout" href="javascript:app.header.userLogout()">Exit</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="dropdown_language" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <span id="dropdown_text_language">Language</span>&nbsp;<b id="dropdown_text_language_code">en</b>
          </a>
          <ul class="dropdown-menu" id="dropdown_menu_language">
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
<!-- end_of_header_content -->

<!-- script -->
<script type="text/javascript">

app.header = (function($, context) {

  $.extend(this, context);

  function createLanguageMenu() {
    var languageCode = getLanguageCode();
    var languageMessages = getLanguageMessages();
    if (languageMessages) {
      $("#dropdown_menu_languagee").empty();
      for (var i = 0; i < languageMessages.length; i++) {
        if (languageMessages[i].status === 'enabled' || languageMessages[i].status === 'disabled') {
          var optionDisabled = (languageMessages[i].status === 'disabled' ? " disabled" : "" );
          $("#dropdown_menu_language").append('<li><a class="dropdown-item' + optionDisabled + '" id="a_' + languageMessages[i].name.toLowerCase() + '" href="javascript:app.header.updateLanguage(\'' + languageMessages[i].code + '\', \''+ languageMessages[i].locale + '\')">' + languageMessages[i].label + ' <b>' + languageMessages[i].code + '</b>' + (languageCode === languageMessages[i].code ? '<span id="span_check_language_' + languageMessages[i].code + '">&nbsp;<i class="fa fa-check"></i></span>' : '<span id="span_check_language_' + languageMessages[i].code + '"></span') + '</a></li>'); // <i class="material-icons">check</i>
        }
      }
    }
  }

  function selectedLanguage(languageCode) {
    // Set colored selected language
  }

  function updateLanguage(languageCode, languageLocale) {
    var currentLanguageCode = getLanguageCode();
    $("#span_check_language_" + currentLanguageCode).empty();
    $("#span_check_language_" + languageCode).html('&nbsp;<i class="fa fa-check"></i>');

    clearLanguageCode();

    setCookie(COOKIE_LANGUAGE_CODE, languageCode, COOKIE_ACTUAL_DAYS);
    setCookie(COOKIE_LANGUAGE_LOCALE, languageLocale, COOKIE_ACTUAL_DAYS);

    setLanguageCodeIntoServices(languageCode);
    setLanguageLocaleIntoServices(languageLocale);

    context.header.updateHeaderLanguage(languageCode);
    context.content.updateContentLanguage(languageCode);
    context.footer.updateFooterLanguage(languageCode);

    /* reload map provider */
    /* $('script').last().remove(); -> cannot remove content of script */
    //loadMapProvider(languageCode);
  }

  function userLogout() {
    clearAuth();
    clearAuthCookie();

    init();
    location.href = window.location.pathname;
    updateHeaderLanguage(getLanguageCode());
    //getUserLogout(); // Do not use (Mobile app could work)
  }

  /* MULTI LANGUAGE */
  function updateHeaderLanguage(languageCode) {
    var menuLinkHome = document.getElementById('menu_link_home');
    var dropdownTextAccount = document.getElementById('dropdown_text_account');
    var dropdownTextAccountUsername = document.getElementById('dropdown_text_account_username');
    var dropdownTextLanguage = document.getElementById('dropdown_text_language');
    var dropdownTextLanguageCode = document.getElementById('dropdown_text_language_code');

    var dropdownMenuAccountLinkLogin = document.getElementById('dropdown_menu_account_link_login');
    var dropdownMenuAccountLinkRegister = document.getElementById('dropdown_menu_account_link_register');
    var dropdownMenuAccountLinkAccount = document.getElementById('dropdown_menu_account_link_account');
    var dropdownMenuAccountLinkLogout = document.getElementById('dropdown_menu_account_link_logout');

    /* captions */
    menuLinkHome.innerHTML = getMessage(languageCode, 1505);
    dropdownTextAccount.innerHTML = getMessage(languageCode, 1503);
    dropdownTextLanguage.innerHTML = getMessage(languageCode, 1506);
    dropdownTextLanguageCode.innerHTML = languageCode;

    var currentUser = getCurrentUser();

    if (currentUser) {
      dropdownTextAccountUsername.innerHTML = currentUser.firstName;
      dropdownMenuAccountLinkAccount.classList.remove("disabled");
      dropdownMenuAccountLinkLogout.classList.remove("disabled");
    } else {
      dropdownTextAccountUsername.innerHTML = "";
      dropdownMenuAccountLinkAccount.classList.add("disabled");
      dropdownMenuAccountLinkLogout.classList.add("disabled");
    }

    dropdownMenuAccountLinkLogin.innerHTML = getMessage(languageCode, 1501);
    dropdownMenuAccountLinkRegister.innerHTML = getMessage(languageCode, 1502);
    dropdownMenuAccountLinkAccount.innerHTML = getMessage(languageCode, 1503);
    dropdownMenuAccountLinkLogout.innerHTML = getMessage(languageCode, 1504);

    //selectedLanguage(languageCode);
  }

  createLanguageMenu();
  updateHeaderLanguage(getLanguageCode());

  // Export
  var o = new Object();
  o.userLogout = userLogout;
  o.updateLanguage = updateLanguage;
  o.updateHeaderLanguage = updateHeaderLanguage;

  return o;

} (jQuery, app));

</script>
<!-- end_of_script -->
